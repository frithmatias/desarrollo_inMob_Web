<form [formGroup]="formAviso" (ngSubmit)="enviarFormulario()" id="formAviso" *ngIf="formData">
    <div class="container animated fadeIn">
        <div class=" row">

            <!-- TITULO -->
            <mat-form-field appearance="fill" class="my-1 col-12">
                <mat-label>Título</mat-label>
                <input matInput formControlName="titulo" [errorStateMatcher]="matcher">
                <!-- <mat-hint>Por favor ingrese un título lo suficientemente descriptivo.</mat-hint> 
                <mat-error
                    *ngIf="formAviso.controls.titulo.hasError('titulo') && !formAviso.controls.titulo.hasError('required')">
                    Por favor ingrese un título válido.
                </mat-error>-->
                <mat-error *ngIf="formAviso.controls.titulo.hasError('required')">
                    El título <strong>es requerido</strong>
                </mat-error>
            </mat-form-field>


            <!-- DESCRIPCION -->
            <mat-form-field appearance="fill" class="my-1 col-12">
                <mat-label>Descripción</mat-label>
                <textarea matInput formControlName="descripcion" style="height: 100px;"></textarea>
            </mat-form-field>
        </div>

        <div class="row">

            <!---------------------------------------------------------------------->
            <!-- SELECT OPERACION -->
            <!---------------------------------------------------------------------->
            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Tipo de operación</mat-label>
                <!-- 
                    cuando el formControlName, que es la estructura de controles del formulario definido 
                    del lado del componente, reciba el mismo valor indicado en [value], el control tomara la opción 
                    que tenga ese valor. 
                -->
                <mat-select formControlName="tipooperacion">
                    <mat-option *ngFor="let operacion of formsService.tiposOperaciones" [value]="operacion._id"
                        (click)="checkOperacion(operacion)">
                        {{ operacion.nombre }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <!---------------------------------------------------------------------->
            <!-- SELECT INMUEBLE -->
            <!---------------------------------------------------------------------->
            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Tipo de inmueble</mat-label>
                <mat-select formControlName="tipoinmueble">
                    <mat-option *ngFor="let inmueble of formsService.tiposInmuebles" [value]="inmueble._id"
                        (click)="checkForFills(inmueble)">
                        {{ inmueble.nombre }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <!---------------------------------------------------------------------->
            <!-- SELECT UNIDAD -->
            <!---------------------------------------------------------------------->
            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Tipo de unidad</mat-label>
                <mat-select formControlName="tipounidad">
                    <mat-option *ngFor="let unidad of unidades" [value]="unidad._id">
                        {{ unidad.nombre }}
                    </mat-option>
                </mat-select>
            </mat-form-field>


            <!---------------------------------------------------------------------->
            <!-- INPUT LOCALIDAD -->
            <!---------------------------------------------------------------------->
            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Ingrese una localidad</mat-label>
                <input type="text" placeholder="Ingrese localidad" matInput [matAutocomplete]="auto"
                    (keyup)="buscarLocalidad( $event )" [formControl]="localidadesControl">
                <!-- <input matInput [matAutocomplete]="auto" formControlName="localidad" value="asdf"
                    (keyup)="buscarLocalidad( $event )"> -->
            </mat-form-field>
            <mat-autocomplete iniciocss #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option.properties.nombre"
                    (click)="setLocalidad(option)">
                    {{option.properties.nombre}}, {{option.properties.departamento.nombre}},
                    {{option.properties.provincia.nombre}}
                </mat-option>
            </mat-autocomplete>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Calle</mat-label>
                <input matInput formControlName="calle">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Altura</mat-label>
                <input matInput formControlName="altura">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Piso</mat-label>
                <input matInput formControlName="piso">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Depto</mat-label>
                <input matInput formControlName="depto">
            </mat-form-field>




            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Precio</mat-label>
                <input matInput formControlName="precio">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Tipo de cambio</mat-label>
                <input matInput formControlName="moneda">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>No publicar el precio</mat-label>
                <input matInput formControlName="nopublicarprecio">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Apto Crédito</mat-label>
                <input matInput formControlName="aptocredito">
            </mat-form-field>

            <mat-form-field appearance="fill" class="my-1 col-12 col-lg-4 col-md-6">
                <mat-label>Código Postal</mat-label>
                <input matInput formControlName="codigopostal">
            </mat-form-field>
        </div>
    </div>
    <button class="btn btn-dark">Guardar</button>
</form>